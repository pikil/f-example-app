"use strict";(self["webpackChunkf_example_app"]=self["webpackChunkf_example_app"]||[]).push([[852],{879:(e,t,l)=>{l.d(t,{DB:()=>s});var a=l(9387);const s=new a.ZP("exampleDB");s.version(1).stores({jobs:"++id, status, clientFName, clientLName, clientPhone, clientEmail, timeCreated"})},253:(e,t,l)=>{l.d(t,{Du:()=>s,HF:()=>o,ig:()=>a});const a=0,s=20,o="YYYY-MM-DD HH:mm"},5565:(e,t,l)=>{l.d(t,{Z:()=>a});const a=[{label:"Scheduled",value:0},{label:"Active",value:1},{label:"Invoicing",value:2},{label:"To Priced",value:3},{label:"Completed",value:4}]},2796:(e,t,l)=>{l.d(t,{Z:()=>u});var a=l(879),s=l(253),o=l(5565),n=l(5836),i=l(4002);class u{constructor(e,t,l,a,s){this.reset(e,t,l,a,s)}get id(){return this._id}get status(){return this._status}set status(e){e=parseInt(e),this._status=!Number.isNaN(this._status)&&o.Z.findIndex((({value:t})=>t===e))>=0?e:s.ig}get client(){return this._client}set client(e){this._client=e||new n.Z}get notes(){return this._notes}set notes(e){this._notes=Array.isArray(e)?e.map((({text:e,time:t})=>new i.Z(e,t))):[]}get timeCreated(){return this._timeCreated}set timeCreated(e){e=parseInt(e),this._timeCreated=!Number.isNaN(e)&&e>0?e:Date.now()}setStatus(e){this.status=e,this.save()}async addNote(e){this.notes.unshift(new i.Z(e)),this.save()}reset(e,t,l,a,s){this._id=e,this.status=t,this.client=l,this.notes=a,this.timeCreated=s}clear(){this.reset()}async save(){const e={id:null,clientFName:this.client.fName,clientLName:this.client.lName,clientPhone:this.client.phone,clientEmail:this.client.email,timeCreated:this.timeCreated,status:this.status,notes:this.notes.map((e=>({text:e.text,time:e.time})))},t=parseInt(this.id);!Number.isNaN(t)&&t>0?e.id=t:(delete e.id,e.timeCreated=Date.now());const l=await a.DB.jobs.put(e);return l}}},5836:(e,t,l)=>{l.d(t,{Z:()=>a});class a{constructor(e,t,l,a){this.fName=null!==e&&void 0!==e?e:"",this.lName=null!==t&&void 0!==t?t:"",this.email=null!==l&&void 0!==l?l:"",this.phone=null!==a&&void 0!==a?a:""}get fName(){return this._fName}set fName(e){this._fName=e.toString()}get lName(){return this._lName}set lName(e){this._lName=e.toString()}get email(){return this._email}set email(e){this._email=e.toString()}get phone(){return this._phone}set phone(e){this._phone=e.toString()}}},4002:(e,t,l)=>{l.d(t,{Z:()=>a});class a{constructor(e,t){this.text=e,this.time=t}get time(){return this._time}set time(e){e=parseInt(e),this._time=!Number.isNaN(e)&&e>0?e:Date.now()}get text(){return this._text}set text(e){this._text=e.substring(0,255)}}},8007:(e,t,l)=>{l.d(t,{m:()=>s});var a=l(2502);const s=(0,a.Q_)("system",{state:()=>({jobAdderDialog:!1,lastNewJobId:0}),actions:{setJobAdder(e){this.jobAdderDialog=e},setLastNewJobId(e){this.lastNewJobId=e}}})},5907:(e,t,l)=>{l.d(t,{Z:()=>p});var a=l(9835);function s(e,t,l,s,o,n){const i=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(i,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),options:e.JobStatuses,dense:"",outlined:"","dropdown-icon":e.fasAngleDown,label:"Status"},null,8,["modelValue","options","dropdown-icon"])}var o=l(5565),n=l(353);const i=(0,a.aZ)({props:{modelValue:{type:[Number,String],required:!0}},setup(e,{emit:t}){return{JobStatuses:o.Z,fasAngleDown:n.f9z,value:(0,a.Fl)({get:()=>{const t=o.Z.find((({value:t})=>t===e.modelValue));return t||null},set:({value:e})=>{t("update:modelValue",e)}})}}});var u=l(1639),d=l(4055),r=l(9984),c=l.n(r);const m=(0,u.Z)(i,[["render",s]]),p=m;c()(i,"components",{QSelect:d.Z})},852:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ve});var a=l(9835),s=l(6970);const o={class:"row items-center q-col-gutter-x-md"},n={class:"col"},i={class:"text-h4 q-my-lg"},u={class:"col-auto"},d={class:"row q-col-gutter-x-md"},r={class:"col-auto"},c={class:"col-auto"},m={class:"row justify-center"};function p(e,t,l,p,b,w){const f=(0,a.up)("q-btn"),h=(0,a.up)("q-input"),v=(0,a.up)("q-select"),_=(0,a.up)("q-item-label"),g=(0,a.up)("q-item-section"),N=(0,a.up)("q-item"),Z=(0,a.up)("job-row"),j=(0,a.up)("q-list"),q=(0,a.up)("q-spinner-dots"),W=(0,a.up)("q-infinite-scroll"),D=(0,a.up)("job-details"),k=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a._)("div",n,[(0,a._)("h1",i,(0,s.zw)(e.$route.name),1)]),(0,a._)("div",u,[(0,a.Wm)(f,{icon:e.fasPlus,outline:"",round:"",onClick:e.showJobDialog},null,8,["icon","onClick"])])]),(0,a.Wm)(W,{ref:"loader",disable:e.allLoaded,onLoad:e.loadJobs},{loading:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(q,{color:"faded",size:"50px"})])])),default:(0,a.w5)((()=>[(0,a.Wm)(j,{class:"border-radius-10 q-mt-lg overflow-hidden",bordered:"",separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{class:"q-pb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",r,[(0,a.Wm)(h,{modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),class:"w-150",label:"Filter",dense:"",debounce:"800"},null,8,["modelValue"])]),(0,a._)("div",c,[(0,a.Wm)(v,{modelValue:e.sort,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sort=t),class:"w-150",label:"Sort","dropdown-icon":e.fasAngleDown,dense:"",options:e.sortOptions},null,8,["modelValue","dropdown-icon","options"])])])])),_:1})])),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.jobs,(t=>((0,a.wg)(),(0,a.j4)(Z,{key:t.id,job:t,onDetails:e.showJobDetails},null,8,["job","onDetails"])))),128))])),_:1})])),_:1},8,["disable","onLoad"]),(0,a.Wm)(k,{"model-value":e.jobSelected,position:"right",onHide:e.unsetSelectedJob},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{job:e.selectedJob},null,8,["job"])])),_:1},8,["model-value","onHide"])],64)}l(702);var b=l(499),w=l(353),f=l(8007),h=l(879),v=l(253),_=l(2796),g=l(5836);const N=(0,a.Uk)("New"),Z={class:"row q-col-gutter-x-sm items-center"},j={class:"col-auto"},q={class:"col-auto"},W={key:0,class:"col-auto text-bold text-amber-10"},D=(0,a.Uk)(" "),k=(0,a.Uk)("   ");function x(e,t,l,o,n,i){const u=(0,a.up)("q-item-label"),d=(0,a.up)("q-badge"),r=(0,a.up)("q-item-section"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-icon"),p=(0,a.up)("job-status-select"),b=(0,a.up)("q-item");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{side:"",top:"",style:{"padding-top":"6px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Job #"+(0,s.zw)(e.job.id),1)])),_:1}),e.job.id===e.lastNewJobId?((0,a.wg)(),(0,a.j4)(u,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:"red"},{default:(0,a.w5)((()=>[N])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",Z,[(0,a._)("div",j,[(0,a._)("strong",null,(0,s.zw)(e.clientName),1)]),(0,a._)("div",q,[(0,a.Wm)(c,{color:"primary",icon:e.fasPencil,flat:"",round:"",size:"sm",onClick:e.showDetails},null,8,["icon","onClick"])]),e.job.notes.length?((0,a.wg)(),(0,a.iD)("div",W,(0,s.zw)(e.job.notes.length)+" note(s)",1)):(0,a.kq)("",!0)])])),_:1}),(0,a.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:e.fasClock},null,8,["name"]),D,(0,a._)("em",null,(0,s.zw)(e.jobTime),1),k])),_:1}),(0,a.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:e.fasEnvelope},null,8,["name"]),(0,a.Uk)(" "+(0,s.zw)(e.job.client.email),1)])),_:1}),(0,a.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:e.fasPhone},null,8,["name"]),(0,a.Uk)(" "+(0,s.zw)(e.job.client.phone),1)])),_:1})])),_:1}),(0,a.Wm)(r,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:e.status,"onUpdate:modelValue":t[0]||(t[0]=t=>e.status=t),class:(0,s.C_)(e.selectClasses)},null,8,["modelValue","class"])])),_:1})])),_:1})}var y=l(5907),S=l(4376);const{formatDate:C}=S.ZP,J=(0,a.aZ)({components:{JobStatusSelect:y.Z},props:{job:{type:_.Z,required:!0}},setup(e,{emit:t}){const l=(0,f.m)();return{fasPhone:w.jr,fasEnvelope:w.EJY,fasClock:w.vlj,fasPencil:w.uqv,jobTime:C(new Date(e.job.timeCreated),v.HF),lastNewJobId:(0,a.Fl)((()=>l.lastNewJobId)),status:(0,a.Fl)({get:()=>e.job.status,set:t=>{e.job.setStatus(t)}}),clientName:(0,a.Fl)((()=>{let t=e.job.client.fName;return""!==e.job.client.lName&&(t+=" "+e.job.client.lName),t})),selectClasses:(0,a.Fl)((()=>{let t="rounded-borders bg-";switch(e.job.status){case 1:t+="light-blue-1";break;case 2:t+="purple-1";break;case 3:t+="yellow-2";break;case 4:t+="green-2";break;case 0:default:t+="grey-2";break}return t})),showDetails:()=>{t("details",e.job)}}}});var Q=l(1639),I=l(490),L=l(1233),V=l(3115),H=l(990),P=l(9379),F=l(2857),A=l(9984),z=l.n(A);const U=(0,Q.Z)(J,[["render",x]]),Y=U;z()(J,"components",{QItem:I.Z,QItemSection:L.Z,QItemLabel:V.Z,QBadge:H.Z,QBtn:P.Z,QIcon:F.Z});const B=[{label:"Newest first",value:0},{label:"Oldest first",value:1},{label:"Scheduled first",value:2},{label:"Completed first",value:3}];var T=l(1957);const E={class:"row q-col-gutter-x-sm items-center"},K={class:"col-auto"},O={class:"col text-faded text-h6"};function M(e,t,l,o,n,i){const u=(0,a.up)("q-btn"),d=(0,a.up)("q-card-section"),r=(0,a.up)("q-input"),c=(0,a.up)("job-status-select"),m=(0,a.up)("q-item-label"),p=(0,a.up)("q-item-section"),b=(0,a.up)("q-item"),w=(0,a.up)("job-note-row"),f=(0,a.up)("q-list"),h=(0,a.up)("q-card"),v=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(h,{class:"full-height min-w-300"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a._)("div",E,[(0,a._)("div",K,[(0,a.wy)((0,a.Wm)(u,{icon:e.fasArrowLeft,color:"faded",flat:"",round:""},null,8,["icon"]),[[v]])]),(0,a._)("div",O,"Job #"+(0,s.zw)(e.job.id),1)])])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"model-value":e.job.client.fName,label:"First name",readonly:"",dense:""},null,8,["model-value"]),(0,a.Wm)(r,{"model-value":e.job.client.lName,label:"Last name",readonly:"",dense:""},null,8,["model-value"]),(0,a.Wm)(r,{"model-value":e.job.client.email,label:"Email",readonly:"",dense:""},null,8,["model-value"]),(0,a.Wm)(r,{"model-value":e.job.client.phone,label:"Phone",readonly:"",dense:""},null,8,["model-value"])])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:e.status,"onUpdate:modelValue":t[0]||(t[0]=t=>e.status=t)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:e.newNoteText,"onUpdate:modelValue":t[1]||(t[1]=t=>e.newNoteText=t),dense:"",outline:"",placeholder:"Add a note",maxlength:"255",disable:e.addingNote,onKeyup:(0,T.D2)(e.addNote,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(u,{icon:e.matSend,color:"primary",flat:"",round:"",loading:e.addingNote,disable:e.addingNote||""===e.newNoteText,onClick:e.addNote},null,8,["icon","loading","disable","onClick"])])),_:1},8,["modelValue","disable","onKeyup"])])),_:1})])),_:1})])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.job.notes,(e=>((0,a.wg)(),(0,a.j4)(w,{key:e.time,note:e},null,8,["note"])))),128))])),_:1})])),_:1})])),_:1})}var R=l(6060);const $=(0,a.Uk)(" - ");function G(e,t,l,o,n,i){const u=(0,a.up)("q-item-label"),d=(0,a.up)("q-item-section"),r=(0,a.up)("q-item");return(0,a.wg)(),(0,a.j4)(r,{dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{caption:""},{default:(0,a.w5)((()=>[(0,a._)("strong",null,(0,s.zw)(e.noteTime),1),$,(0,a._)("em",null,(0,s.zw)(e.note.text),1)])),_:1})])),_:1})])),_:1})}var X=l(4002);const{formatDate:ee}=S.ZP,te=(0,a.aZ)({props:{note:{type:X.Z,required:!0}},setup(e){return{noteTime:ee(new Date(e.note.time),v.HF)}}}),le=(0,Q.Z)(te,[["render",G]]),ae=le;z()(te,"components",{QItem:I.Z,QItemSection:L.Z,QItemLabel:V.Z});const se=(0,a.aZ)({components:{JobStatusSelect:y.Z,JobNoteRow:ae},props:{job:{type:_.Z,required:!0}},setup(e){const t=(0,b.iH)(!1),l=(0,b.iH)("");return{fasArrowLeft:w.YvS,matSend:R.KuS,newNoteText:l,addingNote:t,status:(0,a.Fl)({get:()=>e.job.status,set:t=>{e.job.setStatus(t)}}),addNote:()=>{t.value=!0,setTimeout((()=>{e.job.addNote(l.value),t.value=!1,l.value=""}),500)}}}});var oe=l(4458),ne=l(3190),ie=l(6611),ue=l(3246),de=l(2146);const re=(0,Q.Z)(se,[["render",M]]),ce=re;z()(se,"components",{QCard:oe.Z,QCardSection:ne.Z,QBtn:P.Z,QInput:ie.Z,QList:ue.Z,QItem:I.Z,QItemSection:L.Z,QItemLabel:V.Z}),z()(se,"directives",{ClosePopup:de.Z});const me=(0,a.aZ)({components:{JobRow:Y,JobDetails:ce},setup(){const e=(0,b.iH)(!1),t=(0,f.m)(),l=(0,a.Fl)((()=>t.lastNewJobId)),s=(0,b.iH)(null),o=(0,b.iH)(!1),n=(0,b.iH)([]),i=(0,b.iH)(null),u=(0,b.iH)(""),d=(0,b.iH)(B[0]),r=()=>{n.value=[],o.value=!1,(0,a.Y3)().then((()=>{i.value.stop(),i.value.reset(),i.value.resume()}))};return(0,a.YP)(u,r),(0,a.YP)(d,r),(0,a.YP)(l,r),{fasPlus:w.wak,fasAngleDown:w.f9z,newJobDialog:e,sortOptions:B,jobs:n,allLoaded:o,filter:u,sort:d,loader:i,selectedJob:s,jobSelected:(0,a.Fl)((()=>!!s.value)),showJobDialog:()=>{t.setJobAdder(!0)},loadJobs:(e,t)=>{let l=h.DB.jobs;switch(d.value.value){case 1:l=l.orderBy("id");break;case 2:l=l.orderBy("status");break;case 3:l=l.orderBy("status").reverse();break;case 0:default:l=l.orderBy("id").reverse();break}if(""!==u.value){const e=u.value.toLowerCase();l=l.filter((({clientFName:t,clientLName:l,clientEmail:a,clientPhone:s})=>{switch(!0){case t.toLowerCase().includes(e):case l.toLowerCase().includes(e):case a.toLowerCase().includes(e):case s.toLowerCase().includes(e):return!0;default:return!1}}))}l.offset((e-1)*v.Du).limit(v.Du).toArray().then((e=>{e.length<v.Du&&(o.value=!0),n.value.push(...e.map((({id:e,clientFName:t,clientLName:l,clientPhone:a,clientEmail:s,timeCreated:o,status:n,notes:i})=>new _.Z(e,n,new g.Z(t,l,s,a),i,o)))),t()}))},showJobDetails:e=>{s.value=e},unsetSelectedJob:()=>{s.value=null}}}});var pe=l(6870),be=l(4055),we=l(7501),fe=l(2074);const he=(0,Q.Z)(me,[["render",p]]),ve=he;z()(me,"components",{QBtn:P.Z,QInfiniteScroll:pe.Z,QList:ue.Z,QItem:I.Z,QItemSection:L.Z,QItemLabel:V.Z,QInput:ie.Z,QSelect:be.Z,QSpinnerDots:we.Z,QDialog:fe.Z})}}]);