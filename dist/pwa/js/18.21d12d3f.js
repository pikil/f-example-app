"use strict";(self["webpackChunkf_example_app"]=self["webpackChunkf_example_app"]||[]).push([[18],{879:(e,t,l)=>{l.d(t,{DB:()=>a});var s=l(9387);const a=new s.ZP("exampleDB");a.version(1).stores({jobs:"++id, status, clientFName, clientLName, clientPhone, clientEmail, timeCreated"})},253:(e,t,l)=>{l.d(t,{D:()=>a,i:()=>s});const s=0,a=20},5565:(e,t,l)=>{l.d(t,{Z:()=>s});const s=[{label:"Scheduled",value:0},{label:"Active",value:1},{label:"Invoicing",value:2},{label:"To Priced",value:3},{label:"Completed",value:4}]},2796:(e,t,l)=>{l.d(t,{Z:()=>i});var s=l(879),a=l(253),o=l(5565),n=l(5836);class i{constructor(e,t,l,s,a){this.reset(e,t,l,s,a)}get id(){return this._id}get status(){return this._status}set status(e){e=parseInt(e),this._status=!Number.isNaN(this._status)&&o.Z.findIndex((({value:t})=>t===e))>=0?e:a.i}setStatus(e){this.status=e,this.save()}get client(){return this._client}set client(e){this._client=e||new n.Z}get notes(){return this._notes}set notes(e){this._notes=Array.isArray(e)?e:[]}get timeCreated(){return this._timeCreated}set timeCreated(e){e=parseInt(e),this._timeCreated=!Number.isNaN(e)&&e>0?e:Date.now()}reset(e,t,l,s,a){this._id=e,this.status=t,this.client=l,this.notes=s,this.timeCreated=a}clear(){this.reset()}async save(){const e={id:null,clientFName:this.client.fName,clientLName:this.client.lName,clientPhone:this.client.phone,clientEmail:this.client.email,timeCreated:this.timeCreated,status:this.status,notes:[]},t=parseInt(this.id);!Number.isNaN(t)&&t>0?e.id=t:(delete e.id,e.timeCreated=Date.now());const l=await s.DB.jobs.put(e);return l}}},5836:(e,t,l)=>{l.d(t,{Z:()=>s});class s{constructor(e,t,l,s){this.fName=null!==e&&void 0!==e?e:"",this.lName=null!==t&&void 0!==t?t:"",this.email=null!==l&&void 0!==l?l:"",this.phone=null!==s&&void 0!==s?s:""}get fName(){return this._fName}set fName(e){this._fName=e.toString()}get lName(){return this._lName}set lName(e){this._lName=e.toString()}get email(){return this._email}set email(e){this._email=e.toString()}get phone(){return this._phone}set phone(e){this._phone=e.toString()}}},8007:(e,t,l)=>{l.d(t,{m:()=>a});var s=l(2502);const a=(0,s.Q_)("system",{state:()=>({jobAdderDialog:!1,lastNewJobId:0}),actions:{setJobAdder(e){this.jobAdderDialog=e},setLastNewJobId(e){this.lastNewJobId=e}}})},5907:(e,t,l)=>{l.d(t,{Z:()=>p});var s=l(9835);function a(e,t,l,a,o,n){const i=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)(i,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),options:e.JobStatuses,dense:"",outlined:"","dropdown-icon":e.fasAngleDown,label:"Status"},null,8,["modelValue","options","dropdown-icon"])}var o=l(5565),n=l(353);const i=(0,s.aZ)({props:{modelValue:{type:[Number,String],required:!0}},setup(e,{emit:t}){return{JobStatuses:o.Z,fasAngleDown:n.f9z,value:(0,s.Fl)({get:()=>{const t=o.Z.find((({value:t})=>t===e.modelValue));return t||null},set:({value:e})=>{t("update:modelValue",e)}})}}});var u=l(1639),r=l(2974),d=l(9984),c=l.n(d);const m=(0,u.Z)(i,[["render",a]]),p=m;c()(i,"components",{QSelect:r.Z})},1018:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var s=l(9835),a=l(6970);const o={class:"row items-center q-col-gutter-x-md"},n={class:"col"},i={class:"text-h4 q-my-lg"},u={class:"col-auto"},r={class:"row q-col-gutter-x-md"},d={class:"col-auto"},c={class:"col-auto"},m={class:"row justify-center"};function p(e,t,l,p,b,w){const f=(0,s.up)("q-btn"),h=(0,s.up)("q-input"),v=(0,s.up)("q-select"),_=(0,s.up)("q-item-label"),g=(0,s.up)("q-item-section"),N=(0,s.up)("q-item"),Z=(0,s.up)("job-row"),j=(0,s.up)("q-list"),k=(0,s.up)("q-spinner-dots"),C=(0,s.up)("q-infinite-scroll");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("h1",i,(0,a.zw)(e.$route.name),1)]),(0,s._)("div",u,[(0,s.Wm)(f,{icon:e.fasPlus,outline:"",round:"",onClick:e.showJobDialog},null,8,["icon","onClick"])])]),(0,s.Wm)(C,{ref:"loader",disable:e.allLoaded,onLoad:e.loadJobs},{loading:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Wm)(k,{color:"faded",size:"50px"})])])),default:(0,s.w5)((()=>[(0,s.Wm)(j,{class:"border-radius-10 q-mt-lg overflow-hidden",bordered:"",separator:""},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{class:"q-pb-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",d,[(0,s.Wm)(h,{modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filter=t),class:"w-150",label:"Filter",dense:"",debounce:"800"},null,8,["modelValue"])]),(0,s._)("div",c,[(0,s.Wm)(v,{modelValue:e.sort,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sort=t),class:"w-150",label:"Sort","dropdown-icon":e.fasAngleDown,dense:"",options:e.sortOptions},null,8,["modelValue","dropdown-icon","options"])])])])),_:1})])),_:1})])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.jobs,(e=>((0,s.wg)(),(0,s.j4)(Z,{key:e.id,job:e},null,8,["job"])))),128))])),_:1})])),_:1},8,["disable","onLoad"])],64)}l(702);var b=l(499),w=l(353),f=l(8007),h=l(879),v=l(253),_=l(2796),g=l(5836);const N=(0,s.Uk)("New"),Z=(0,s.Uk)(" "),j=(0,s.Uk)("   ");function k(e,t,l,o,n,i){const u=(0,s.up)("q-item-label"),r=(0,s.up)("q-badge"),d=(0,s.up)("q-item-section"),c=(0,s.up)("q-icon"),m=(0,s.up)("job-status-select"),p=(0,s.up)("q-item");return(0,s.wg)(),(0,s.j4)(p,{class:(0,a.C_)(e.bgClass)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{side:"",top:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Job #"+(0,a.zw)(e.job.id),1)])),_:1}),e.job.id===e.lastNewJobId?((0,s.wg)(),(0,s.j4)(u,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{color:"red"},{default:(0,s.w5)((()=>[N])),_:1})])),_:1})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s._)("strong",null,(0,a.zw)(e.clientName),1)])),_:1}),(0,s.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:e.fasClock},null,8,["name"]),Z,(0,s._)("em",null,(0,a.zw)(e.jobTime),1),j])),_:1}),(0,s.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:e.fasPhone},null,8,["name"]),(0,s.Uk)(" "+(0,a.zw)(e.job.client.phone),1)])),_:1}),(0,s.Wm)(u,{caption:"",class:"text-faded q-py-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{name:e.fasEnvelope},null,8,["name"]),(0,s.Uk)(" "+(0,a.zw)(e.job.client.email),1)])),_:1})])),_:1}),(0,s.Wm)(d,{side:"",top:""},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:e.status,"onUpdate:modelValue":t[0]||(t[0]=t=>e.status=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["class"])}var C=l(5907),q=l(4376);const{formatDate:D}=q.ZP,W=(0,s.aZ)({components:{JobStatusSelect:C.Z},props:{job:{type:_.Z,required:!0}},setup(e){const t=(0,f.m)();return{fasPhone:w.jr,fasEnvelope:w.EJY,fasClock:w.vlj,jobTime:D(new Date(e.job.timeCreated),"YYYY-MM-DD HH:mm"),lastNewJobId:(0,s.Fl)((()=>t.lastNewJobId)),status:(0,s.Fl)({get:()=>e.job.status,set:t=>{e.job.setStatus(t)}}),clientName:(0,s.Fl)((()=>{let t=e.job.client.fName;return""!==e.job.client.lName&&(t+=" "+e.job.client.lName),t})),bgClass:(0,s.Fl)((()=>{let t="bg-";switch(e.job.status){case 1:t+="light-blue-1";break;case 2:t+="purple-1";break;case 3:t+="yellow-2";break;case 4:t+="green-2";break;case 0:default:t+="grey-2";break}return t}))}}});var I=l(1639),S=l(490),y=l(1233),J=l(3115),L=l(990),Q=l(2857),V=l(9984),x=l.n(V);const P=(0,I.Z)(W,[["render",k]]),A=P;x()(W,"components",{QItem:S.Z,QItemSection:y.Z,QItemLabel:J.Z,QBadge:L.Z,QIcon:Q.Z});const F=[{label:"Newest first",value:0},{label:"Oldest first",value:1},{label:"Scheduled first",value:2},{label:"Completed first",value:3}],Y=(0,s.aZ)({components:{JobRow:A},setup(){const e=(0,b.iH)(!1),t=(0,f.m)(),l=(0,s.Fl)((()=>t.lastNewJobId)),a=(0,b.iH)(!1),o=(0,b.iH)([]),n=(0,b.iH)(null),i=(0,b.iH)(""),u=(0,b.iH)(F[0]),r=()=>{o.value=[],n.value.reset(),(0,s.Y3)().then((()=>{a.value=!1}))};return(0,s.YP)(i,r),(0,s.YP)(u,r),(0,s.YP)(l,r),{fasPlus:w.wak,fasAngleDown:w.f9z,newJobDialog:e,sortOptions:F,jobs:o,allLoaded:a,filter:i,sort:u,loader:n,showJobDialog:()=>{t.setJobAdder(!0)},loadJobs:(e,t)=>{let l=h.DB.jobs;switch(u.value.value){case 1:l=l.orderBy("id");break;case 2:l=l.orderBy("status");break;case 3:l=l.orderBy("status").reverse();break;case 0:default:l=l.orderBy("id").reverse();break}if(""!==i.value){const e=i.value.toLowerCase();l=l.filter((({clientFName:t,clientLName:l,clientEmail:s,clientPhone:a})=>{switch(!0){case t.toLowerCase().includes(e):case l.toLowerCase().includes(e):case s.toLowerCase().includes(e):case a.toLowerCase().includes(e):return!0;default:return!1}}))}l.offset((e-1)*v.D).limit(v.D).toArray().then((e=>{e.length<v.D&&(a.value=!0),o.value.push(...e.map((({id:e,clientFName:t,clientLName:l,clientPhone:s,clientEmail:a,timeCreated:o,status:n,notes:i})=>new _.Z(e,n,new g.Z(t,l,a,s),i,o)))),t()}))}}}});var B=l(9379),H=l(6870),U=l(3246),z=l(6611),E=l(2974),O=l(7501);const T=(0,I.Z)(Y,[["render",p]]),M=T;x()(Y,"components",{QBtn:B.Z,QInfiniteScroll:H.Z,QList:U.Z,QItem:S.Z,QItemSection:y.Z,QItemLabel:J.Z,QInput:z.Z,QSelect:E.Z,QSpinnerDots:O.Z})}}]);